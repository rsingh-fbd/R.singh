<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Raw TS Stream Player</title>
    <script src="https://cdn.jsdelivr.net/npm/mpegts.js@1.7.3/dist/mpegts.js"></script>
    <style>
        body { margin: 0; background-color: #1a1a1a; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        #videoElement { width: 80%; max-width: 1200px; background-color: black; }
    </style>
</head>
<body>

    <video id="videoElement" controls autoplay muted></video>

    <script>
        const videoSrc = 'http://87.255.35.150:18882/index.ts';
        const videoElement = document.getElementById('videoElement');

        // 2. Check for mpegts.js support
        if (mpegts.isSupported()) {
            // 3. Create a player instance
            const player = mpegts.createPlayer({
                type: 'ts', // Specify stream type as Transport Stream
                url: videoSrc,
                isLive: true, // Crucial for a live stream
                cors: true // May be necessary if the server doesn't send CORS headers
            }, {
                // Optional: Reduce default buffer size for lower latency (more live-like)
                liveBufferLatencyMaxLatency: 2, 
                liveBufferLatencyMinFetchDuration: 0.5 
            });

            // 4. Attach the player to the video element
            player.attachMediaElement(videoElement);
            
            // 5. Load the stream and attempt to play
            player.load();
            videoElement.play().catch(error => {
                console.error("Autoplay failed:", error);
                // Prompt user to interact if autoplay is blocked
                if (videoElement.paused) {
                    alert("Click OK to play the live stream.");
                    videoElement.muted = false; // Unmute if user has to interact
                    videoElement.play();
                }
            });
            
            // Optional: Error handling
            player.on(mpegts.Events.ERROR, function(errorType, errorDetails, errorInfo) {
                console.error('MPEGTS Error:', errorType, errorDetails);
            });

        } else {
            // Fallback for unsupported browsers
            videoElement.innerHTML = '<p style="color:white;padding:20px;">Your browser does not support MPEG-TS playback.</p>';
        }
    </script>

</body>
</html>
