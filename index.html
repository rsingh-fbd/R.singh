<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Live Stream Player</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background:#000; margin:0; overflow:hidden; }
    #playerContainer { position:relative; width:100vw; height:100vh; background:#000; display:flex; align-items:center; justify-content:center; }
    video { width:100%; height:100%; object-fit:contain; background:#000; }
    #channelListOverlay {
      position:fixed; top:0; left:0; width:300px; height:100%;
      background:rgba(20,20,20,0.95);
      color:#fff; overflow-y:auto; transform:translateX(-100%);
      transition:transform 0.3s ease-in-out; z-index:1000; padding-top:60px;
    }
    #channelListOverlay.show { transform:translateX(0); }
    #channelListOverlay ul { list-style:none; padding:0; margin:0; }
    #channelListOverlay li { padding:10px 15px; cursor:pointer; border-bottom:1px solid #333; }
    #channelListOverlay li:hover { background:#444; }
    #toggleChannelList { position:fixed; top:50%; left:0; transform:translateY(-50%); background:#222; color:#fff; padding:8px; cursor:pointer; z-index:1100; border-radius:0 5px 5px 0; }
    #channelSearch { position:absolute; top:10px; left:10px; width:80%; z-index:1101; }
    #channelNameOverlay {
      position:absolute; top:20px; left:50%; transform:translateX(-50%);
      background:rgba(0,0,0,0.6); color:#fff; padding:6px 15px;
      border-radius:5px; font-size:1.2rem; display:none;
    }
    .control-btn {
      position:absolute; top:50%; transform:translateY(-50%);
      background:rgba(0,0,0,0.5); color:#fff; border:none; font-size:2rem;
      padding:8px 12px; cursor:pointer; z-index:900;
    }
    #prevBtn { left:15px; }
    #nextBtn { right:15px; }
  </style>
</head>
<body>
  <div id="playerContainer">
    <video id="videoPlayer" controls autoplay></video>
    <div id="channelNameOverlay"></div>
    <button id="prevBtn" class="control-btn">⏮</button>
    <button id="nextBtn" class="control-btn">⏭</button>
  </div>  <div id="toggleChannelList">☰</div>
  <div id="channelListOverlay">
    <input type="text" id="channelSearch" class="form-control" placeholder="Search channel...">
    <ul id="channelList"></ul>
  </div>  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>  <script>
    const m3uUrl = "https://raw.githubusercontent.com/rsingh-fbd/R.singh/main/Playlist.m3u";
    const video = document.getElementById('videoPlayer');
    const channelList = document.getElementById('channelList');
    const channelOverlay = document.getElementById('channelListOverlay');
    const toggleBtn = document.getElementById('toggleChannelList');
    const channelNameOverlay = document.getElementById('channelNameOverlay');
    const searchInput = document.getElementById('channelSearch');
    let channels = [], currentIndex = 0;

    async function loadM3U(){
      const res = await fetch(m3uUrl);
      const text = await res.text();
      parseM3U(text);
    }

    function parseM3U(data){
      const lines = data.split(/\r?\n/);
      let name="";
      for(let line of lines){
        if(line.startsWith("#EXTINF")){
          const match = line.match(/,(.*)$/);
          if(match) name = match[1].trim();
        } else if(line && !line.startsWith("#")){
          channels.push({name, url:line});
        }
      }
      renderChannelList(channels);
      if(channels.length>0) playChannel(0);
    }

    function renderChannelList(list){
      channelList.innerHTML = "";
      list.forEach((ch, i) => {
        const li = document.createElement('li');
        li.textContent = ch.name || `Channel ${i+1}`;
        li.onclick = () => { playChannel(i); closeOverlay(); };
        channelList.appendChild(li);
      });
    }

    function playChannel(index){
      currentIndex = index;
      const ch = channels[index];
      if(!ch) return;

      if(Hls.isSupported()){
        const hls = new Hls();
        hls.loadSource(ch.url);
        hls.attachMedia(video);
      } else if(video.canPlayType('application/vnd.apple.mpegurl')){
        video.src = ch.url;
      }
      showChannelName(ch.name);
    }

    function showChannelName(name){
      channelNameOverlay.textContent = name;
      channelNameOverlay.style.display = 'block';
      setTimeout(()=>channelNameOverlay.style.display='none', 4000);
    }

    function closeOverlay(){
      channelOverlay.classList.remove('show');
    }

    toggleBtn.onclick = ()=>{
      channelOverlay.classList.toggle('show');
    };

    document.getElementById('prevBtn').onclick = ()=>{
      let idx = (currentIndex - 1 + channels.length) % channels.length;
      playChannel(idx);
    };
    document.getElementById('nextBtn').onclick = ()=>{
      let idx = (currentIndex + 1) % channels.length;
      playChannel(idx);
    };

    searchInput.addEventListener('input', ()=>{
      const q = searchInput.value.toLowerCase();
      const filtered = channels.filter(c=>c.name.toLowerCase().includes(q));
      renderChannelList(filtered);
    });

    loadM3U();
  </script></body>
</html>